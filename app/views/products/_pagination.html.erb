<nav class="text-center" aria-label="Page navigation">
  <ul class="pagination">
    <li>
      <% if @page_number > 1 %>
        <a href="?<%= params.except(:action, :controller, :page_number).to_query %>&page_number=<%= @page_number - 1 %>" aria-label="Next">
          <span aria-hidden="true">&laquo;</span>
        </a>
      <% else %>
        <a href="?<%= params.except(:action, :controller, :page_number).to_query %>&page_number=<%= @pages %>" aria-label="Next">
          <span aria-hidden="true">&laquo;</span>
        </a>
      <% end %>
    </li>
    <% @pages.times do |time| %>
      <% if time + 1 == 1 || (time + 1 <= @page_number + 1 && time + 1 >= @page_number) || time + 1 == @pages || time + 1 == @page_number - 1 %>
        <% if @page_number > 3 && time + 1 == @page_number - 1%>
          <li><a>...</a></li>
        <% end %>
        <% if time == @pages - 1 && @page_number < @pages - 2%>
          <li><a>...</a></li>
        <% end %>
        <% if time + 1 == @page_number %>
          <li class="active"><a href="?<%= params.except(:action, :controller, :page_number).to_query %>&page_number=<%= time + 1 %>"><%= time + 1 %></a></li>
        <% else %>
          <li><a href="?<%= params.except(:action, :controller, :page_number).to_query %>&page_number=<%= time + 1 %>"><%= time + 1 %></a></li>
        <% end %>
      <% end %>
    <% end %>
    <li>
      <% if @page_number < @pages %>
        <a href="?<%= params.except(:action, :controller, :page_number).to_query %>&page_number=<%= @page_number + 1 %>" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      <% else %>
        <a href="?<%= params.except(:action, :controller, :page_number).to_query %>&page_number=<%= 1 %>" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      <% end %>
    </li>
  </ul>
</nav>
